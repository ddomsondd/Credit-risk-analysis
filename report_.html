
<!DOCTYPE html>
<html>
<head>    
    <title>Atlas Bootcamp</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">

    <div class="header">
      <h1>Analiza zdolności kredytowej</h1>
    </div>

    <div class="main">
      <p>Pracę nad raportem zaczęłam od zapoznania się ze zbiorem danych oraz analizy danych.</p>
    <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>age</th>
      <th>income</th>
      <th>children</th>
      <th>credit_history</th>
      <th>overdue_payments</th>
      <th>active_loans</th>
      <th>years_in_job</th>
      <th>employment_type</th>
      <th>owns_property</th>
      <th>assets_value</th>
      <th>other_loans</th>
      <th>education</th>
      <th>city</th>
      <th>marital_status</th>
      <th>support_indicator</th>
      <th>credit_risk</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>44</td>
      <td>15689 złoty</td>
      <td>brak</td>
      <td>dobra historia</td>
      <td>brak opóźnień</td>
      <td>2</td>
      <td>9</td>
      <td>samozatrudnienie</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>wyższe</td>
      <td>małe</td>
      <td>żonaty/zamężna</td>
      <td>0.178131</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>38</td>
      <td>18906 złoty</td>
      <td>4 dzieci</td>
      <td>brak historii</td>
      <td>brak opóźnień</td>
      <td>0</td>
      <td>1</td>
      <td>stała</td>
      <td>tak</td>
      <td>62965 złoty</td>
      <td>0</td>
      <td>średnie</td>
      <td>średnie</td>
      <td>kawaler/panna</td>
      <td>0.370480</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>46</td>
      <td>16338 złoty</td>
      <td>2 dzieci</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>4</td>
      <td>brak</td>
      <td>tak</td>
      <td>124967 złoty</td>
      <td>0</td>
      <td>podstawowe</td>
      <td>duże</td>
      <td>żonaty/zamężna</td>
      <td>0.712334</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>55</td>
      <td>23276 złoty</td>
      <td>3 dzieci</td>
      <td>dobra historia</td>
      <td>opóźnienia</td>
      <td>2</td>
      <td>10</td>
      <td>stała</td>
      <td>tak</td>
      <td>52147 złoty</td>
      <td>1</td>
      <td>średnie</td>
      <td>małe</td>
      <td>kawaler/panna</td>
      <td>0.665050</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>37</td>
      <td>40000 złoty</td>
      <td>1 dzieci</td>
      <td>brak historii</td>
      <td>NaN</td>
      <td>1</td>
      <td>9</td>
      <td>określona</td>
      <td>nie</td>
      <td>33957 złoty</td>
      <td>1</td>
      <td>wyższe</td>
      <td>małe</td>
      <td>kawaler/panna</td>
      <td>0.607151</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
      <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Tabela 1. Przedstawienie kilku pierwszych wierszy zbioru danych.</p>
      <p>
          Niektóre kolumny, takie jak: 'Unnamed: 0', 'support_indicator ', nie wnoszą żadnych istotnych danych, więc można je od razu usunąć.
          Należy także przekształcić dane w niektórych kolumnach tak, aby były łatwo interpretowane przez program, np. poprzez usunięcie niepotrzebnych łańcuchów znakowych ("dzieci", "złotych"), usunięcie wierszy z wybrakowanymi danymi, tzn. wierszy, które zawierają komórki z wartościami NaN, a także przekształcenie kolumn na kolumny one-hot encoding. 
          Aby nie stracić jednak za dużo danych niektóre wartości NaN zostaną zastąpione przez losowo wybrane wartości występujące w danej kolumnie.
          Wszelkie funkcje do obróbki danych zawarłam w pliku <span style="font-style: italic;">data_preparation.py</span>.
          Tak przygotowane dane można poddać wstępnej analizie.
      </p>
    <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>age</th>
      <th>income</th>
      <th>children</th>
      <th>credit_history</th>
      <th>overdue_payments</th>
      <th>active_loans</th>
      <th>years_in_job</th>
      <th>employment_type</th>
      <th>owns_property</th>
      <th>assets_value</th>
      <th>other_loans</th>
      <th>education</th>
      <th>city</th>
      <th>marital_status</th>
      <th>support_indicator</th>
      <th>credit_risk</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>44</td>
      <td>15689 złoty</td>
      <td>brak</td>
      <td>dobra historia</td>
      <td>brak opóźnień</td>
      <td>2</td>
      <td>9</td>
      <td>samozatrudnienie</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1</td>
      <td>wyższe</td>
      <td>małe</td>
      <td>żonaty/zamężna</td>
      <td>0.178131</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>38</td>
      <td>18906 złoty</td>
      <td>4 dzieci</td>
      <td>brak historii</td>
      <td>brak opóźnień</td>
      <td>0</td>
      <td>1</td>
      <td>stała</td>
      <td>tak</td>
      <td>62965 złoty</td>
      <td>0</td>
      <td>średnie</td>
      <td>średnie</td>
      <td>kawaler/panna</td>
      <td>0.370480</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>46</td>
      <td>16338 złoty</td>
      <td>2 dzieci</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2</td>
      <td>4</td>
      <td>brak</td>
      <td>tak</td>
      <td>124967 złoty</td>
      <td>0</td>
      <td>podstawowe</td>
      <td>duże</td>
      <td>żonaty/zamężna</td>
      <td>0.712334</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>55</td>
      <td>23276 złoty</td>
      <td>3 dzieci</td>
      <td>dobra historia</td>
      <td>opóźnienia</td>
      <td>2</td>
      <td>10</td>
      <td>stała</td>
      <td>tak</td>
      <td>52147 złoty</td>
      <td>1</td>
      <td>średnie</td>
      <td>małe</td>
      <td>kawaler/panna</td>
      <td>0.665050</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>37</td>
      <td>40000 złoty</td>
      <td>1 dzieci</td>
      <td>brak historii</td>
      <td>NaN</td>
      <td>1</td>
      <td>9</td>
      <td>określona</td>
      <td>nie</td>
      <td>33957 złoty</td>
      <td>1</td>
      <td>wyższe</td>
      <td>małe</td>
      <td>kawaler/panna</td>
      <td>0.607151</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
      <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Tabela 2. Przedstawienie kilku pierwszych wierszy zbioru danych po przetworzeniu danych.</p>

      <h2>Przykładowe wykresy do zbioru danych</h2>
      <p>Wszystkie wykresy utworzyłam w pliku <span style="font-style: italic;">data_visualistion.py</span>.</p>
      <div class="img_class">
        <div class="box">
          <div style="flex-direction: column;">
            <img src="plots/age_income.png" arc="" style="margin-right: 30px;">
            <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Wykres 1.</p>
          </div>
            Wykres zestawiający wiek do rocznego wynagrodzenia z uwzględnieniem rodzaju wykształcenia. Jako że próbek jest dużo, samo uwzględnienie wszystkich danych nie daje zbyt dużo informacji. Widać jedynie miejsca gęstszego oraz rzadszego wystąpienia kropek przedstawiających próbki. Dlatego też dodałam wykres ciągły, który przedstawia średnie wynagrodzenie roczne według określonej grupy wiekowej. Widać więc, że oscyluje ono głównie w przedziale 20-25 tysięcy zł rocznie.
        </div>

        <div class="box">
          <div style="flex-direction: column;">
            <img src="plots/children_credit_history.png" arc="" style="margin-right: 30px;">
            <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Wykres 2.</p>
          </div>
            Wykres przedstawia zestawienie liczby dzieci do historii kredytowej. Jak widać najwięcej kredytów jest brane przez osoby nie posiadające dzieci. Z każdnym kolejnym dzieckiem liczba wziętych kredytów jest mniejsza.
        </div>

        <div class="box">
          <div style="flex-direction: column;">
            <img src="plots/income.png" arc="" style="margin-right: 30px;" >
            <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Wykres 3.</p>
          </div>
            Wykres przedstawia rozkład średniego rocznego wynagrodzenia w odniesieniu do ilości osób. Jak widać największa liczba przebadanych zarabia około 40 tys. zł rocznie, zaś na drugim i trzecim miejscu są dochody z zakresu 15-20 tys. zł rocznie.
        </div>

        <div class="box">
          <div style="flex-direction: column;">
            <img src="plots/employment_type.png" arc="" style="margin-right: 30px;">
            <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Wykres 4.</p>
          </div>
            Wykres przedstawia typy zatrudnienia w odniesieniu do rodzaju wykształcenia. Ciekawym spostrzeżeniem jest fakt, iż w każdnym z typów zatrudnień najwięcej przebadanych posiada wykształcenie średnie, następnie podstawowe, a nie jak mogłoby się wydawać - wyższe.
        </div>
      </div>

      <h2>Modele klasyfikacyjne</h2>
      <p>Porównałam ze sobą pięć modeli klasyfikacyjnych. Modele stworzyłam w pliku <span style="font-style: italic;">classification.py</span>.
        <ul>
          <li>Decision Tree Classifier</li>
          <li>Random Forest Classifier</li>
          <li>Support Vector Classifier</li>
          <li>Gaussian Naive Bayes</li> 
          <li>XGBoost Classifier</li>
        </ul>
        Jak widać po poniższej tabeli najlepiej dopasowane modele to las losowy oraz XGBoost. Statystyki dokładności oraz swoistości wszystkich modeli są do siebie bardzo zbliżone i wysokie, ale jednak wyjątek stanowi wskaźnik czułości, który w przypadku maszyny wektorów nośnych oraz naiwnego klasyfikatora Bayesa wskazuje 0, co może wskazywać na pewne błędy lub problemy z danymi. 
      </p>
    <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Model</th>
      <th>Accuracy</th>
      <th>Recall</th>
      <th>Specificity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>DTC</td>
      <td>0.9857</td>
      <td>0.7727</td>
      <td>0.9897</td>
    </tr>
    <tr>
      <th>1</th>
      <td>RFC</td>
      <td>0.9941</td>
      <td>0.6818</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>SVC</td>
      <td>0.9815</td>
      <td>0.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>GNB</td>
      <td>0.9815</td>
      <td>0.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>XGBC</td>
      <td>0.9941</td>
      <td>0.6818</td>
      <td>1.0000</td>
    </tr>
  </tbody>
</table>
      <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">Tabela 2. Przedstawienie miar jakości dopasowania danych modeli.</p>
      
      <h3>Macierze pomyłek dla poszczególnych modeli</h3>
      <div class="img_inline">
        <div style="flex-direction: column;">
          <img src="plots/plot_class_DTC.png" arc="Confusion matrix for Decision Tree Classifier">
          <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">1. Macierz pomyłek dla modelu drzewa decyzyjnego.</p>
        </div>
        <div style="flex-direction: column;">
          <img src="plots/plot_class_RFC.png" arc="Confusion matrix for Random Forest Classifier">
          <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">2. Macierz pomyłek dla modelu lasu losowego.</p>
        </div>
        <div style="flex-direction: column;">
          <img src="plots/plot_class_SVC.png" arc="Confusion matrix for Support Vector Machine Classifier">
          <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">3. Macierz pomyłek dla modelu maszyny wektorów nośnych.</p>
        </div>
        <div style="flex-direction: column;">
          <img src="plots/plot_class_GNB.png" arc="Confusion matrix for Gaussian Naive Bayes Classifier">
          <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">4. Macierz pomyłek dla naiwnego klasyfikatora Bayesa.</p>
        </div>
        <div style="flex-direction: column;">
          <img src="plots/plot_class_XGBC.png" arc="Confusion matrix for XGBoost Classifier">
          <p style="font-style: italic; font-size: 14px; text-align: center; margin-top: 2px;">5. Macierz pomyłek dla modelu XGBoost.</p>
        </div>
      </div>
      <p>Macierze pomyłek wskazują na wysokie wyniki poprawnego sklasyfikowania przykładów, jednak widać, że zbiór danych został dosyć zmniejszony, 
        ponieważ początkowa liczba wierszy w zbiorze danych to około 10 tys. w związku z czym zbiór testowy powienien wynosić około 2 tys., a jak można zauważyć 
        macierze pomyłek wskazują na 1189 próbek. Jest to spowodowane usunięciem wierszy z wybrakowanymi danymi (o wartościach NaN). Nie jest to jednakowoż zła 
        liczba (raczej ;P), ponieważ początkowo zastosowałam jedynie metodę usunięcia wierszy, w których były wartości NaN. Wtedy uzuskałam jedynie 585 próbek, 
        a więc zbiór danych został zmniejszony prawie 3,5 razy. Po zastosowaniu zastąpienia niektórych wartości NaN losowymi wartościami z danych kolumn zbiór został 
        znacznie mniej zmiejszony, ponieważ o około 1,7 razu.</p>
    </div>
    <div class="footer"></div>
  </div>
</body>
</html> 
